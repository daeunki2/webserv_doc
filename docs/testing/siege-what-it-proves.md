---
sidebar_position: 2
---


# siege-what-it-proves.md

## 1. 이 문서의 목적
이 문서는 webserv 프로젝트에서
siege를 이용해 동시 요청 상황을 어떻게 테스트했는지,
그리고 이 테스트를 통해 무엇을 확인하려 했는지를 정리한다.

siege 테스트의 목적은
서버의 성능 수치를 측정하는 것이 아니라,
동시 접속 상황에서도 서버가 안정적으로 동작하는지를 확인하는 데 있다.

## 2. siege란 무엇인가
siege는 여러 개의 HTTP 요청을
동시에 서버로 전송할 수 있는 부하 테스트 도구이다.

curl이 하나의 요청을 정밀하게 테스트하는 도구라면,
siege는 여러 요청이 동시에 들어오는 상황을 재현하는 데 사용된다.

webserv 프로젝트에서는
다음과 같은 상황을 가정해 siege를 사용했다.

여러 클라이언트가 동시에 서버에 접속하는 경우
짧은 시간 안에 다수의 요청이 들어오는 경우
poll 기반 이벤트 루프가 정상적으로 동작하는지 확인해야 하는 경우


## 3. siege 기본 사용법
siege의 기본적인 사용 형태는 다음과 같다.

```bash
siege [옵션] <URL>

가장 단순한 예시는 다음과 같다.

siege http://127.0.0.1:8080/
```

이 명령어는 하나의 URL에 대해 여러 요청을 반복적으로 전송한다.

4. 동시 요청 수와 반복 횟수 지정
siege에서는 옵션을 통해 동시에 요청을 보내는 클라이언트 수와 요청 반복 횟수를 지정할 수 있다.

```bash
siege -c 20 -r 10 http://127.0.0.1:8080/
```
각 옵션의 의미는 다음과 같다.

-c 20 동시에 20개의 클라이언트가 요청을 보내도록 설정한다.

-r 10 각 클라이언트가 요청을 10번씩 반복하도록 설정한다.

즉, 위 명령어는 총 200번의 요청을 동시성 환경에서 서버로 전송한다.

5. 이 테스트로 확인하려는 것
siege 테스트를 통해 확인하려는 핵심은 다음과 같다.

여러 요청이 동시에 들어와도 서버가 크래시하지 않는지

poll 기반 이벤트 루프가 정상적으로 유지되는지

특정 요청이 서버 전체를 block 하지 않는지

테스트 종료 후 서버가 정상 상태를 유지하는지

이 테스트에서는 응답 속도나 처리량 같은 수치보다는, 서버의 안정성과 일관성에 초점을 둔다.